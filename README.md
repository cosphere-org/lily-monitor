
# Lily-Monitor

Lily Monitoring using the assertions rendered on the lily commands configuration file.


## Assumptions

### CLI tool

- it exposes a command which is capable of generating a set of tests that are run every finite amount of time (infrequent tests)
- besides that it generate tests that can be run much more frequently and are just a subset of the infrequent ones.

### Local vs Remote execution

- it can also run it locally after pointing it to a specific lily commands file
- generating command is capable of deploying that monitoring tests directly to some virtual machine

### Results

- results of each run are send to S3 in the form of json and html reports
- also summary result is send to the Slack Channel
- if any of the tests fail the Slack notification contains alerting instruction like `@here` or `@channel`


## Running Rendered Tests Locally

```bash
make start_monitor
```

## TODOs

- [ ] Use `api.json` for testing / experimenting purposes only and render out of it some automated tests
- [ ] Get rid of `rendered.py` and dump autogenerated tests to some `/tmp` location
- [ ] expose CLI tool which when pointed to the `api.json` can:
    1. render tests and run them locally
    1. render tests and deploy them to virtual machine
    1. the deployment should replace already running there tests
- [ ] what we also deploy is a mechanism for sending test run reports in the form of JSON and HTML to S3 and we notify SLACK
- [ ] we should render two sets of tests SLOW and FAIRLY complete one (running for example every 1 hour) and FAST SMOKEY style running every couple of minutes just to probe the behaviour of the stack
